<!DOCTYPE html>
<html lang="en" class="">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Turing</title>

        <!-- Tailwind -->
        <script src="https://cdn.tailwindcss.com"></script>
        <script src="../tailwind.config.js"></script>

        <!-- Custom CSS -->
        <link rel="stylesheet" href="../css/scrollbar.css" />
    </head>
    <body>
        <div class="flex flex-col">
            <div class="mx-auto p-5 mb-10 text-center">
                <h1 class="font-medium">Turing Machine</h1>
                <h1 class="font-medium">Exponent</h1>
            </div>
        </div>
        <section id="input" class="mb-10 mx-4 flex flex-col gap-y-4">
            <div class="flex gap-x-5">
                <div>
                    <label
                        for="input-base"
                        class="block text-sm text-gray-500 dark:text-gray-300"
                        >Base</label
                    >

                    <input
                        type="text"
                        id="input-base"
                        name="input-base"
                        placeholder="Number"
                        class="block mt-2 w-full placeholder-gray-400/70 dark:placeholder-gray-500 rounded-lg border border-gray-200 bg-white px-5 py-2.5 text-gray-700 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40 dark:border-gray-600 dark:bg-gray-900 dark:text-gray-300 dark:focus:border-blue-300" />
                </div>
                <div>
                    <label
                        for="input-exponent"
                        class="block text-sm text-gray-500 dark:text-gray-300"
                        >Exponent</label
                    >

                    <input
                        type="text"
                        id="input-exponent"
                        name="input-exponent"
                        placeholder="Number"
                        class="block mt-2 w-full placeholder-gray-400/70 dark:placeholder-gray-500 rounded-lg border border-gray-200 bg-white px-5 py-2.5 text-gray-700 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40 dark:border-gray-600 dark:bg-gray-900 dark:text-gray-300 dark:focus:border-blue-300" />
                </div>

                <div class="flex items-end">
                    <button
                        id="input-btn"
                        class="px-6 py-3 font-medium tracking-wide text-white capitalize transition-colors duration-300 transform bg-blue-600 rounded-lg hover:bg-blue-500 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-80">
                        Set
                    </button>
                </div>
            </div>

            <div class="flex gap-x-5">
                <div>
                    <label
                        for="raw-input"
                        class="block text-sm text-gray-500 dark:text-gray-300"
                        >Raw Input</label
                    >

                    <input
                        type="text"
                        placeholder="BBXX0YYYYB"
                        name="raw-input"
                        id="raw-input"
                        class="block mt-2 w-full placeholder-gray-400/70 dark:placeholder-gray-500 rounded-lg border border-gray-200 bg-white px-5 py-2.5 text-gray-700 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40 dark:border-gray-600 dark:bg-gray-900 dark:text-gray-300 dark:focus:border-blue-300" />
                </div>

                <div class="invisible">
                    <label
                        for="username"
                        class="block text-sm text-gray-500 dark:text-gray-300"
                        >Ga keliatan bang</label
                    >

                    <input
                        type="text"
                        placeholder="Number"
                        class="block mt-2 w-full placeholder-gray-400/70 dark:placeholder-gray-500 rounded-lg border border-gray-200 bg-white px-5 py-2.5 text-gray-700 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40 dark:border-gray-600 dark:bg-gray-900 dark:text-gray-300 dark:focus:border-blue-300" />
                </div>

                <div class="flex items-end">
                    <button
                        id="raw-input-btn"
                        class="px-6 py-3 font-medium tracking-wide text-white capitalize transition-colors duration-300 transform bg-blue-600 rounded-lg hover:bg-blue-500 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-80">
                        Set
                    </button>
                </div>
            </div>
        </section>

        <main>
            <div class="tape-container flex flex-col mx-2"></div>
        </main>
        <script>
            const cellStyle = {
                head: "border-red-500 bg-white-600 hover:bg-blue-500 text-red",
                standard:
                    "border-blue-500 bg-blue-600 hover:bg-red-500 text-white",

                defaultAll:
                    "border-2 px-6 py-2 font-mono font-medium tracking-wide capitalize transition-colors duration-300 transform rounded-lg",

                getStyle(isHead) {
                    const def = this.defaultAll + " ";
                    return isHead ? def + this.head : def + this.standard;
                },
            };

            const addTape = function (container) {
                const tape = document.createElement("div");

                tape.setAttribute(
                    "class",
                    "tape px-2 py-2 flex gap-x-1 flex-row w-full mx-auto overflow-x-scroll bg-white rounded-lg dark:bg-gray-800 scrollbar"
                );

                container.appendChild(tape);
                return tape;
            };

            const addCell = function (tape, text, isHead = false) {
                const newCell = document.createElement("div");
                newCell.setAttribute("class", cellStyle.getStyle(isHead));

                newCell.textContent = text;
                tape.appendChild(newCell);
                return newCell;
            };

            const resetTape = function (tape) {
                tape.innerHTML = "";
            };

            const setRawInput = function (rawInputValue, tape) {
                resetTape(tape);

                for (a = 0; a < rawInputValue.length; a++) {
                    addCell(tape, rawInputValue[a]);
                }
            };

            const setInput = function (tape, input) {};

            document.addEventListener("DOMContentLoaded", function (event) {
                // Create a new <div> element
                const tapeContainer = document.querySelector(".tape-container");

                // Standard Input Form
                const baseInput = document.getElementById("input-base");
                const exponentInput = document.getElementById("input-exponent");
                const inputBtn = document.getElementById("input-btn");

                // Raw Input Form
                const rawInput = document.getElementById("raw-input");
                const rawInputBtn = document.getElementById("raw-input-btn");

                const tape1 = addTape(tapeContainer);
                const tape2 = addTape(tapeContainer);
                const tape3 = addTape(tapeContainer);
                const tape4 = addTape(tapeContainer);

                addCell(tape1, "A", true);
                addCell(tape1, "F");
                addCell(tape1, "I");
                addCell(tape1, "F");
                for (a = 0; a < 100; a++) {
                    addCell(tape1, "F");
                }

                addCell(tape2, "A");
                addCell(tape2, "F", true);
                addCell(tape2, "A");
                addCell(tape2, "N");

                addCell(tape3, "H");
                addCell(tape3, "A");
                addCell(tape3, "F", true);
                addCell(tape3, "I");
                addCell(tape3, "D");
                addCell(tape3, "H");

                addCell(tape4, "F");
                addCell(tape4, "A");
                addCell(tape4, "I");
                addCell(tape4, "Z", true);

                inputBtn.addEventListener("click", function (event) {
                    resetTape(tape1);
                    const base = baseInput.value;
                    const exponent = exponentInput.value;

                    let rawInputValue = "BB";
                    rawInputValue += "1".repeat(base);
                    rawInputValue += "0";
                    rawInputValue += "1".repeat(exponent);
                    rawInputValue += "BB";

                    setRawInput(rawInputValue, tape1);
                });

                rawInputBtn.addEventListener("click", function (event) {
                    setRawInput(rawInput.value, tape1);
                });
            });
        </script>
    </body>
</html>
